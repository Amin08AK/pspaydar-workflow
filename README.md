# سیستم اتوماسیون فرایند (Workflow Automation System)

[![زبان](https://img.shields.io/badge/language-Python-blue.svg)](https://www.python.org/)
[![فریم‌ورک](https://img.shields.io/badge/framework-Django-green.svg)](https://www.djangoproject.com/)
[![لایسنس](https://img.shields.io/badge/license-MIT-lightgrey.svg)](https://opensource.org/licenses/MIT)

یک پلتفرم جامع و متن-باز برای خودکارسازی و مدیریت فرایندهای سازمانی، توسعه داده شده با فریم‌ورک جنگو. این سیستم به سازمان‌ها اجازه می‌دهد تا گردش‌کارهای خود را به صورت دیجیتال تعریف کرده، وظایف را به صورت هوشمند بین کاربران ارجاع دهند و تاریخچه کامل هر درخواست را ردیابی کنند.

![اسکرین‌شات داشبورد](https-your-image-host-com/dashboard.png)
*(توصیه می‌شود در اینجا یک اسکرین‌شات از داشبورد پروژه خود قرار دهید)*

---

## ✨ ویژگی‌های کلیدی

### 核心功能
- **مدیریت فرایندهای داینامیک:** تعریف فرایندها و مراحل آن‌ها از طریق پنل ادمین.
- **ساختار سازمانی:** تعریف مدیر برای هر کاربر جهت ارجاعات هوشمند.
- **ارجاع خودکار وظایف:** ارسال وظایف به مسئول مرحله یا مدیر مستقیم ثبت‌کننده.
- **تاریخچه کامل (Audit Trail):** ثبت تمام اقدامات روی یک درخواست به همراه زمان، کاربر و توضیحات.
- **پیوست فایل:** امکان آپلود مستندات در هر مرحله از فرایند.

### رابط کاربری و تجربه کاربری
- **داشبورد مرکزی:** نمایش کارتابل ورودی، درخواست‌های ارسالی و آمار کلیدی.
- **نمایش گرافیکی فرایند:** نمودار گرافیکی و زنده از مسیر گردش کار در صفحه جزئیات درخواست.
- **تایم‌لاین تاریخچه:** نمایش تاریخچه وقایع به صورت گرافیکی و خوانا.
- **پشتیبانی از تقویم شمسی (جلالی):** تمام تاریخ‌ها در سیستم به صورت شمسی نمایش داده می‌شوند.
- **جستجو و فیلتر پیشرفته:** فیلتر کردن درخواست‌ها بر اساس شناسه، نوع فرایند و وضعیت.

### اعلان‌ها و اتوماسیون
- **اعلان‌های ایمیلی:** ارسال ایمیل خودکار به کاربران برای وظایف جدید.
- **اعلان‌های لحظه‌ای (In-App):** نمایش اعلان‌های خوانده‌نشده از طریق آیکون زنگوله.
- **مدیریت مهلت انجام (Deadlines):** تعریف مهلت زمانی برای هر مرحله و نمایش بصری درخواست‌های فوری و معوق.
- **یادآوری خودکار:** ارسال ایمیل یادآوری برای وظایف معوق به صورت زمان‌بندی‌شده.

### امنیت
- **کنترل دسترسی قدرتمند:** جلوگیری از دسترسی غیرمجاز به درخواست‌های دیگران.
- **محافظت در برابر حملات رایج:** ایمن در برابر حملات XSS, CSRF و SQL Injection به لطف مکانیزم‌های داخلی جنگو.
- **مدیریت کامل رمز عبور:** شامل تغییر و بازیابی رمز عبور به صورت امن.

---

## 🛠️ تکنولوژی‌های استفاده شده

- **Backend:** Python 3.10+, Django 4.2+
- **Frontend:** HTML5, CSS3, Bootstrap 5
- **Database:** SQLite3 (برای توسعه)
- **Visualization:** Graphviz (برای رندر گراف فرایند و چارت سازمانی)
- **Notifications:** Django Signals, SMTP
- **Other Libraries:** `django-jalali-date`, `arabic-reshaper`, `python-bidi`

---

## 🚀 راه‌اندازی و نصب

برای اجرای این پروژه به صورت محلی، مراحل زیر را دنبال کنید:

### ۱. پیش‌نیازها
- Python 3.10 یا بالاتر
- `pip` و `venv`
- نرم‌افزار Graphviz (باید روی سیستم عامل شما نصب و به PATH اضافه شده باشد)

### ۲. کلون کردن پروژه
```bash
git clone https://github.com/your-username/your-repo-name.git
cd your-repo-name
```

### ۳. ایجاد و فعال‌سازی محیط مجازی
```bash
# در ویندوز
python -m venv venv
venv\Scripts\activate

# در macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

### ۴. نصب کتابخانه‌های مورد نیاز
یک فایل به نام `requirements.txt` در ریشه پروژه بسازید و محتوای زیر را در آن قرار دهید. سپس دستور نصب را اجرا کنید.

**محتوای فایل `requirements.txt`:**
```txt
Django>=4.2
django-jalali-date>=1.5.0
graphviz>=0.20
arabic-reshaper>=3.0.0
python-bidi>=0.4.2
```

**دستور نصب:**
```bash
pip install -r requirements.txt
```

### ۵. تنظیمات و متغیرهای محیطی
یک فایل به نام `secrets.json` در ریشه پروژه (کنار `settings.py`) بسازید. این فایل برای نگهداری اطلاعات حساس استفاده می‌شود و در `.gitignore` قرار دارد.

```json
{
  "DJANGO_SECRET_KEY": "your-strong-random-secret-key",
  "EMAIL_HOST_USER": "your-gmail-address@gmail.com",
  "EMAIL_HOST_PASSWORD": "your-gmail-app-password"
}
```
**نکته مهم:** برای `EMAIL_HOST_PASSWORD`، از رمز عبور اصلی جیمیل خود استفاده نکنید. به جای آن یک **App Password** از تنظیمات امنیتی حساب گوگل خود بسازید.

### ۶. اجرای Migration ها و ساخت Superuser
```bash
python manage.py migrate
python manage.py createsuperuser
```
سپس اطلاعات کاربری ادمین را وارد کنید.

### ۷. اجرای سرور توسعه
```bash
python manage.py runserver
```
اکنون پروژه در آدرس `http://127.0.0.1:8000` در دسترس است.

---

## 📖 راهنمای استفاده اولیه

۱.  وارد پنل ادمین شوید (`/admin`).
۲.  در بخش **Core > Processes**، یک فرایند جدید (مثلاً "درخواست مرخصی") ایجاد کنید.
۳.  برای فرایند ساخته‌شده، چند **Process Step** (مرحله) با ترتیب مشخص تعریف کنید. می‌توانید برای هر مرحله یک مسئول پیش‌فرض تعیین کنید.
۴.  چند کاربر عادی در سیستم ایجاد کرده و برای آن‌ها مدیر (`manager`) تعیین کنید تا ساختار سازمانی شکل بگیرد.
۵.  از پنل ادمین خارج شده و با یک کاربر عادی وارد شوید. از داشبورد می‌توانید فرایند جدید را شروع کنید.

### اجرای دستور ارسال یادآوری
برای ارسال ایمیل‌های یادآوری برای کارهای معوق، دستور زیر را به صورت دستی اجرا کنید. این دستور باید روی سرور به صورت زمان‌بندی‌شده (Cron Job) اجرا شود.

```bash
python manage.py send_reminders
```
**نکته:** فراموش نکنید که در فایل `core/management/commands/send_reminders.py`، آدرس دامنه خود را جایگزین `your-domain.com` کنید.

---

## 🗺️ نقشه راه و توسعه آینده
- [ ] **فرم‌های اختصاصی:** قابلیت تعریف فیلدهای داده‌ای سفارشی برای هر فرایند.
- [ ] **سیستم نقش‌ها و دسترسی‌ها (RBAC):** تعریف نقش‌های کاربری پیچیده‌تر با سطوح دسترسی متفاوت.
- [ ] **گزارش‌گیری:** افزودن بخش گزارش‌های مدیریتی برای تحلیل عملکرد فرایندها.
- [ ] **اتصال به API:** امکان شروع یا پیشبرد فرایندها از طریق API.

---

## 📄 لایسنس
این پروژه تحت لایسنس MIT منتشر شده است. برای اطلاعات بیشتر فایل `LICENSE` را مطالعه کنید.